
> В самом начале нужно сделать важное уточнение: бот создан для автоматического мониторинга расписания и его рассылки для **конкретного** школьного учреждения, в следствии чего он не будет работать для всех учреждений!

## Для кого подходит такой бот?

Для этого нужно одновременное соблюдение следующих условий:
- Файл с расписанием скачивается по шаблону "example.com/id=N", где N увеличивается при каждом обновлении или добавлении файла с расписанием.
- Сайт, с которого будет брать расписание не имеет никакой защиты. В противном случае наши постоянные запросы сайта будут ломаться.
- Расширения файла с расписанием должно быть .xlsx, .pdf или png. Конкретно данная версия предназначена для конвертации .xlsx в .pdf, а следов в .png. Но это можно легко изменить, поставив '#' перед вызовом функций, предназначенных для конвертаций. В том числе могут и изменяться страницы в excel таблице и их количество.
## Принцип работы бота

Каждые 3 секунды бот проверяет сайт на наличие файла по последнему id + n, где n принимает целые значения от 1 до 15. При обнаружении файла он проверяет название файла на наличие расширения .xlsx, а также наличию названия дня недели в названии файла.

Дальше бот записывает файл в качестве sched.xlsx, проверяет на совпадения даты в названии текущего и предыдущего расписания, и при совпадении закрашивает жёлтым цветом изменившиеся уроки. Если совпадения нет, копирует файл в качестве old_sched.xlsx.

Далее бот конвертирует файл в .pdf, а следом в .png. Обусловлено это невозможностью автоматизировать прямую конвертацию из .xlsx в .png, из-за чего приходится использовать данный костыль. После конвертации бот рассылает расписание с подписью в виде названия файла без нижних подчёркиваний и расширения в заданные чаты.
## Настройка файла db.py

- Меняете TOKEN на токен своего бота
- url_base на ссылку вида 'example.com/id=N'
- Добавляете в channels id чатов, в которые бот будет осуществлять рассылку. Значения являются целыми числами, для обозначения канала и группы в начало id добавляется -100.
- my_id меняете на ваш id, куда бот будет писать об ошибках. Может являться как личкой, так и группой. Для обозначения id группы действуют всё те же правила.
